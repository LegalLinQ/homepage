<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beer Selector</title>
    <script src="https://cdn.jsdelivr.net/gh/json-rules-engine@6.4.2/dist/index.js"></script>
</head>
<body>
    <form name="beerForm">
        <label>
            <input type="radio" name="beerType" value="light beer" onclick="selectBeer()" /> Light Beer
        </label>
        <label>
            <input type="radio" name="beerType" value="brown beer" onclick="selectBeer()" /> Brown Beer
        </label>
    </form>
    <p id="output"></p>
    <script>
        function selectBeer() {
            var beerType = document.querySelector('input[name="beerType"]:checked').value;
            // creating a new rule engine instance
            let Engine = jsonRulesEngine.Engine;
            let engine = new Engine();

            // defining the rules
            const rules = [{
                conditions: {
                    all: [{
                        fact: 'beerType',
                        operator: 'equal',
                        value: 'light beer'
                    }]
                },
                event: {
                    type: 'beerType',
                    params: {
                        message: 'Heineken'
                    }
                }
            }, {
                conditions: {
                    all: [{
                        fact: 'beerType',
                        operator: 'equal',
                        value: 'brown beer'
                    }]
                },
                event: {
                    type: 'beerType',
                    params: {
                        message: 'Leffe'
                    }
                }
            }];

            // adding the rules to the engine
            rules.forEach(rule => engine.addRule(rule));

            // defining the facts for the engine
            const facts = {
                beerType: beerType
            };

            // running the engine
            engine
                .run(facts)
                .then(events => { // using the output from the engine to display the beer name
                    const output = document.getElementById('output');
                    output.innerHTML = events.length ? events[0].params.message : 'No beer selected';
                });
        }
    </script>
</body>
</html>
